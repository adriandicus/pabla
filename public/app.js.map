{"version":3,"sources":["actions.js","Container.jsx","createCanvasComponent.js","index.js","Card.jsx","DownloadButton.jsx","FiltersPicker.jsx","ImageCanvas.jsx","ImagePicker.jsx","SizePicker.jsx","TextPropertiesPicker.jsx","App.jsx","LeftSidebar.jsx","RightSidebar.jsx","initialize.js","reducer.js","canvas.js","text.js","textEditor.js"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["export const setFontSize = (size) => ({\n  type: 'SET_FONT_SIZE',\n  size\n});\n\nexport const setContrast = (contrast) => ({\n  type: 'SET_CONTRAST',\n  contrast\n});\n\nexport const selectImage = (image) => ({\n  type: 'SELECT_IMAGE',\n  image\n});\n\nexport const setSize = (size) => ({\n  type: 'SET_SIZE',\n  size\n});\n\nexport const setText = (text) => ({\n  type: 'SET_TEXT',\n  text\n});\n\nexport const cacheDrawing = (drawing) => ({\n  type: 'CACHE_DRAWING',\n  drawing\n});\n","import React from 'react';\n\nimport ReactUpdates from 'react/lib/ReactUpdates';\nimport ReactMultiChild from 'react/lib/ReactMultiChild';\nimport ReactInstanceMap from 'react/lib/ReactInstanceMap';\n\nimport {renderCanvasLayout} from 'util/canvas';\n\nconst Container = Object.assign({}, ReactMultiChild.Mixin, {\n});\n\nexport default React.createClass({\n  mixins: [Container],\n  render() {\n    const {width, height} = this.props;\n    const {onMouseDown, onMouseMove, onMouseUp} = this.props\n    const style = { width, height };\n    const scale = window.devicePixelRatio || 1;\n    return <canvas ref=\"canvas\" width={width*scale} height={height*scale} style={style} {...{onMouseDown, onMouseMove, onMouseUp}} />\n  },\n  componentDidMount() {\n    this._debugID = this._reactInternalInstance._debugID;\n    const tx = ReactUpdates.ReactReconcileTransaction.getPooled();\n    tx.perform(this.mountAndInjectChildren, this, this.props.children, tx, ReactInstanceMap.get(this)._context);\n    ReactUpdates.ReactReconcileTransaction.release(tx);\n\n    this.refs.canvas.getContext('2d').scale(window.devicePixelRatio || 1, window.devicePixelRatio || 1);\n  },\n\n  componentDidUpdate(oldProps) {\n    // TODO: update children instead\n    const tx = ReactUpdates.ReactReconcileTransaction.getPooled();\n    tx.perform(this.mountAndInjectChildren, this, this.props.children, tx, ReactInstanceMap.get(this)._context);\n    ReactUpdates.ReactReconcileTransaction.release(tx);\n\n    if (oldProps.height !== this.props.height || oldProps.width !== this.props.width) {\n      this.refs.canvas.getContext('2d').scale(window.devicePixelRatio || 1, window.devicePixelRatio || 1);\n    }\n  },\n\n  mountAndInjectChildren(children, tx, ct) {\n    const mounted = this.mountChildren(children, tx, ct);\n    window.requestAnimationFrame(this._draw);\n  },\n\n  _draw() {\n    const layoutChildren = Object.keys(this._renderedChildren).map(key => {\n      const child = this._renderedChildren[key];\n      const node = child.getNativeNode();\n      return node;\n    });\n\n    const layout = {\n      frame: [0, 0, this.props.width, this.props.height],\n      children: layoutChildren\n    };\n\n    const ctx = this.refs.canvas.getContext('2d');\n    const {width, height} = this.props;\n    ctx.clearRect(0, 0, width, height);\n\n    renderCanvasLayout(ctx, layout);\n  }\n});\n","export default (name, drawFn) => {\n  const CanvasComp = function(el) {\n    this._el = el;\n  };\n  CanvasComp.displayName = 'Rect';\n  Object.assign(CanvasComp.prototype, {\n    construct() {},\n    mountComponent(transaction, hostParent, hostContainerInfo, context) {\n      return {};\n    },\n    receiveComponent() {},\n    unmountComponent() {},\n    getNativeNode() {\n      return drawFn(this._el.props);\n    }\n  });\n  return CanvasComp;\n};\n","import Container from './Container';\nimport createCanvasComponent from './createCanvasComponent';\n\nexport const CanvasRect = createCanvasComponent('CanvasRect', (props) => Object.assign({ type: 'rect' }, props));\nexport const CanvasFilter = createCanvasComponent('CanvasFilter', (props) => Object.assign({ type: 'filter' }, props));\nexport const CanvasImage = createCanvasComponent('CanvasImage', (props) => Object.assign({ type: 'image' }, props));\nexport const CanvasText = createCanvasComponent('CanvasText', (props) => Object.assign({ type: 'text' }, props));\nexport const CanvasOutline = createCanvasComponent('CanvasOutline', (props) => Object.assign({ type: 'outline' }, props));\nexport const CanvasLine = createCanvasComponent('CanvasLine', (props) => Object.assign({ type: 'line' }, props));\nexport const Canvas = Container;\n","import React from 'react';\n\nexport default ({ title, children }) => {\n  return <div className=\"Card\">\n    <div className=\"Card-header\"><h4>{title}</h4></div>\n    {children}\n  </div>\n};\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    drawing: React.PropTypes.string\n  },\n\n  handleDownload(e) {\n    const uri = this.props.drawing;\n    const link = e.target;\n    link.href = uri;\n    link.click();\n  },\n\n  render() {\n    return <div>\n      <a className=\"Button\" download=\"pabla.jpg\" target=\"_blank\" onClick={this.handleDownload}>Download</a>\n    </div>;\n  }\n});\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    contrast: React.PropTypes.bool.isRequired,\n    onContrastChange: React.PropTypes.func.isRequired\n  },\n\n  updateContrast() {\n    const val = this.refs.contrast.checked;\n    this.props.onContrastChange(val);\n  },\n\n  render() {\n    return <div>\n      <label>\n        <input ref=\"contrast\" checked={this.props.contrast} type=\"checkbox\" onChange={this.updateContrast} /> Contrast\n      </label>\n    </div>;\n  }\n});\n","import React from 'react';\nimport {Canvas, CanvasRect, CanvasFilter, CanvasImage, CanvasText, CanvasOutline, CanvasLine} from './Canvas';\n\nimport {findIdxForCursor, findPosForCursor, findCoordsForPos, findRectsForSelection} from 'util/text';\nimport TextEditor from 'util/textEditor';\n\nconst _ctx = document.createElement('canvas').getContext('2d');\n\nconst keys = {\n  8:  'backspace',\n  27: 'escape',\n  37: 'arr_left',\n  39: 'arr_right'\n};\n\nconst SIZES = {\n  tall: [500, 750],\n  square: [500, 500],\n  wide: [500, 250]\n};\n\nconst getMousePos = (e, canvas) => {\n  const rect = canvas.getBoundingClientRect();\n  const mousePos = {\n    x: e.clientX - rect.left,\n    y: e.clientY - rect.top\n  };\n  return mousePos;\n};\n\nconst isInRect = (pos, rect) => {\n  return (pos.x >= rect[0] && pos.x <= rect[0] + rect[2]) && (pos.y >= rect[1] && pos.y <= rect[1] + rect[3]);\n};\n\nconst applyMouseDiff = (textRect, mouseDiff) => {\n  return [textRect[0]-mouseDiff.x, textRect[1]-mouseDiff.y, textRect[2], textRect[3]];\n};\n\n// TODO:\n// wait for image loading\nexport default React.createClass({\n  initSize(size, cb) {\n    const obj = {};\n    [obj.canvasWidth, obj.canvasHeight] = SIZES[size];\n    const state = this.state;\n    if (state.canvasWidth === obj.canvasWidth && state.canvasHeight === obj.canvasHeight) {\n      cb();\n    } else {\n      this.setState(obj, cb);\n    }\n  },\n\n  componentWillReceiveProps(nextProps) {\n    this.initSize(nextProps.size, () => {\n      this.redraw(nextProps);\n    });\n  },\n\n  getInitialState() {\n    this.textEditor = new TextEditor(this);\n    return {};\n  },\n\n  componentWillMount() {\n    this.initSize(this.props.size);\n  },\n\n  componentDidMount() {\n    document.addEventListener('keypress', this.handleKeyUp);\n    document.addEventListener('keydown', this.handleKeyDown);\n    this.textRect = [20, 20, this.state.canvasWidth - 40, this.state.canvasHeight - 40];\n    window.requestAnimationFrame(this.doRedraw);\n\n    setInterval(() => {\n      if (this.state.isEditing) {\n        this.textEditor.toggleCursor();\n        window.requestAnimationFrame(this.doRedraw);\n      }\n    }, 450);\n  },\n\n  doRedraw() {\n    this.redraw(this.props);\n  },\n\n  redraw(nextProps) {\n    if (!nextProps) nextProps = this.props;\n\n    this.forceUpdate();\n    this.props.onRedraw && this.props.onRedraw(this.refs.canvas.refs.canvas.toDataURL('image/jpeg'));\n  },\n\n  cancelEditing() {\n    this.setState({ isEditing: false });\n    setTimeout(this.doRedraw, 50);\n  },\n\n  moveCursor(dir, shift) {\n    this.textEditor.moveCursor(dir, shift);\n    setTimeout(this.doRedraw, 50);\n  },\n\n  insertOrDeleteChar(char) {\n    const newText = this.textEditor.insertOrDeleteChar(char);\n    this.props.onTextChange(newText);\n  },\n\n  selectAll() {\n    this.textEditor.selectAll();\n    setTimeout(this.doRedraw, 150);\n  },\n\n  handleKeyDown(e) {\n    if (this.state.isEditing) {\n      if (e.which === 65 && e.metaKey === true) {\n        e.preventDefault();\n        return this.selectAll();\n      }\n\n      switch (keys[e.which]) {\n        case 'escape':\n          this.cancelEditing();\n          break;\n        case 'arr_left':\n          this.moveCursor('left', e.shiftKey);\n          break;\n        case 'arr_right':\n          this.moveCursor('right', e.shiftKey);\n          break;\n      }\n    }\n  },\n\n  handleKeyUp(e) {\n    if (e.keyIdentifier === 'Meta' || e.keyIdentifier === 'Alt' || e.keyIdentifier === 'Control') return;\n\n    if (this.state.isEditing) {\n      if (keys[e.which] === 'backspace') {\n        this.insertOrDeleteChar();\n      } else {\n        let char = String.fromCharCode(e.charCode);\n        if (!e.shiftKey) char = char.toLowerCase();\n        if (e.keyCode === 13) char = '\\n';\n        this.insertOrDeleteChar(char);\n      }\n    }\n  },\n\n  handleMouseDown(e) {\n    const mousePos = getMousePos(e, this.refs.canvas.refs.canvas);\n    this.startPos = mousePos;\n\n    const textRect = this.textRect;\n    const isInTextRect = isInRect(mousePos, textRect);\n\n    if (isInTextRect) {\n      this.mouseHeld = true;\n      if (this.state.isFocused) {\n        this.mouseDown = new Date;\n      }\n      this.setState({ isFocused: true });\n      setTimeout(this.doRedraw, 100);\n    } else {\n      this.setState({ isFocused: false, isEditing: false });\n      setTimeout(this.doRedraw, 100);\n    }\n  },\n\n  handleMouseMove(e) {\n    if (this.mouseHeld) {\n      // move\n\n      const mousePos = getMousePos(e, this.refs.canvas.refs.canvas);\n\n      const mouseDiff = {\n        x: this.startPos.x - mousePos.x,\n        y: this.startPos.y - mousePos.y\n      };\n\n      if (this.state.isFocused && !this.state.isEditing) {\n        this.textRect = applyMouseDiff(this.textRect, mouseDiff);\n        this.setState({ mouseDiff });\n        this.startPos = mousePos;\n      } else if (this.state.isFocused && this.state.isEditing) {\n        const cursor1 = this.startPos;\n        const cursor2 = mousePos;\n\n\n        const canvas = this.refs.canvas.refs.canvas;\n        const ctx = canvas.getContext('2d');\n        const {textRect} = this;\n        const {text, fontSize} = this.props;\n        let idx1 = findIdxForCursor(ctx, textRect, cursor1, fontSize, text);\n        let idx2 = findIdxForCursor(ctx, textRect, cursor2, fontSize, text);\n        this.textEditor.cursor1 = idx1;\n        this.textEditor.cursor2 = idx2;\n      }\n\n      setTimeout(this.doRedraw, 50);\n    }\n  },\n\n  handleMouseUp(e) {\n    if (this.mouseDown) {\n      if ((new Date - this.mouseDown) < 200) {\n        const canvas = this.refs.canvas.refs.canvas;\n        const ctx = canvas.getContext('2d');\n        const {textRect} = this;\n        const {text, fontSize} = this.props;\n        this.textEditor.cursor = findIdxForCursor(ctx, textRect, this.startPos, fontSize, text) || this.textEditor.cursor;\n        this.setState({ isEditing: true });\n        this.textEditor.cursor1 = null;\n        this.textEditor.cursor2 = null;\n\n        setTimeout(this.doRedraw, 50);\n      }\n    }\n    this.setState({ mouseDiff: null });\n    this.mouseDown = null;\n    this.mouseHeld = false;\n    setTimeout(this.doRedraw, 50);\n  },\n\n  getSelectionRects() {\n    const {textEditor} = this;\n\n    if (this.state.isEditing && textEditor.cursor1 && textEditor.cursor2) {\n      const {fontSize, text} = this.props;\n      const rects = findRectsForSelection(_ctx, this.textRect, textEditor.cursor1, textEditor.cursor2, fontSize, text);\n      if (rects) {\n        return rects.map((rect, i) => {\n          const {x1,x2,y1,y2} = rect;\n          return [x1, y1, x2-x1, y2-y1];\n        });\n      }\n    }\n\n    return [];\n  },\n\n  getCursorCoords(selRects = []) {\n    const {textEditor} = this;\n\n    if (this.state.isEditing && textEditor.showCursor && selRects.length === 0) {\n      const {fontSize, text} = this.props;\n      const pos = findPosForCursor(_ctx, textEditor.cursor, fontSize, text);\n      if (pos) {\n        return findCoordsForPos(_ctx, this.textRect, fontSize, text, pos);\n      }\n    }\n  },\n\n  render() {\n    const image = this.props.image || {};\n    const img = [].slice.apply(document.images).find(i => this.props.image.url === i.src);\n    const {canvasWidth, canvasHeight, isFocused, isEditing} = this.state;\n    const {contrast, fontSize, text} = this.props;\n    const {textRect, mouseHeld, textEditor} = this;\n    const mainFrame = [0, 0, canvasWidth, canvasHeight];\n\n    const selectionRectFrames = this.getSelectionRects();\n    const selectionRects = selectionRectFrames.map((frame, i) => {\n      return <CanvasRect key={i} fill=\"rgba(87, 205, 255, 0.5)\" frame={frame} />\n    });\n\n    let cursorLine;\n    const cursorCoords = this.getCursorCoords(selectionRects);\n    if (cursorCoords) {\n      cursorLine = <CanvasLine color=\"rgba(255, 255, 255, 0.75)\" width={1} from={[cursorCoords.x, cursorCoords.y1]} to={[cursorCoords.x, cursorCoords.y2]} />;\n    }\n\n    return <div className=\"ImageCanvas\">\n      <Canvas ref=\"canvas\" width={canvasWidth} height={canvasHeight} onMouseDown={this.handleMouseDown} onMouseMove={this.handleMouseMove} onMouseUp={this.handleMouseUp}>\n        {img ?\n          <CanvasImage image={img} frame={mainFrame} /> :\n          null}\n        {contrast ?\n          <CanvasFilter frame={mainFrame} /> :\n          null}\n        {textRect ?\n          <CanvasText text={text} frame={textRect} fontSize={fontSize} onUpdateRect={newRect => this.textRect = newRect} /> :\n          null}\n        {textRect && isFocused ?\n          <CanvasOutline width={2} frame={textRect} color={mouseHeld ? 'rgba(87, 205, 255, 0.5)' : '#0092d1'} /> :\n          null}\n        {cursorLine}\n        {selectionRects}\n      </Canvas>\n    </div>\n  }\n});\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    images: React.PropTypes.arrayOf(React.PropTypes.shape({ url: React.PropTypes.string })).isRequired,\n    selected: React.PropTypes.shape({ url: React.PropTypes.string }),\n    onSelect: React.PropTypes.func\n  },\n\n  handleSelect(image) {\n    this.props.onSelect && this.props.onSelect(image);\n  },\n\n  render() {\n    const selected = this.props.selected || {};\n    return <div className=\"ImagePicker\">\n      {this.props.images.map(image => {\n        const sel = image.url === selected.url;\n        const className = 'ImagePicker-image' + (sel ? ' ImagePicker-image--selected' : '');\n        return <div className={className} onClick={() => this.handleSelect(image)} key={image.url}>\n          <div className=\"ImagePicker-image-wrapper\"><img crossOrigin=\"anonymous\" src={image.url}/ ></div>\n        </div>\n      })}\n    </div>;\n  }\n});\n","import React from 'react';\n\nconst SizeItem = ({ name, code, currentCode, onSelect }) => {\n  const onClick = (e) => {\n    e.preventDefault();\n    onSelect(code);\n  };\n  const className = `SizePicker-size SizePicker-size--${code}` + (code === currentCode ? ' SizePicker-size--selected' : '');\n\n  return <div className={className} onClick={onClick}>\n    <div className=\"SizePicker-size-wrapper\">\n      {name}\n    </div>\n  </div>\n};\n\nexport default React.createClass({\n  render() {\n    const size = this.props.size;\n\n    return <div className=\"SizePicker\">\n      <SizeItem name=\"Tall\" code=\"tall\" currentCode={size} onSelect={this.props.onSizeSelect} />\n      <SizeItem name=\"Square\" code=\"square\" currentCode={size} onSelect={this.props.onSizeSelect} />\n      <SizeItem name=\"Wide\" code=\"wide\" currentCode={size} onSelect={this.props.onSizeSelect} />\n    </div>;\n  }\n});\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    fontSize: React.PropTypes.number.isRequired,\n    onFontSizeChange: React.PropTypes.func.isRequired\n  },\n\n  updateFontSize() {\n    const val = parseInt(this.refs.fontSize.value, 10);\n    this.props.onFontSizeChange(val);\n  },\n\n  render() {\n    return <div>\n      Font size:\n      <select ref=\"fontSize\" value={this.props.fontSize} onChange={this.updateFontSize}>\n        {[8, 10, 12, 14, 16, 18, 20, 22, 26, 32, 36, 42, 48, 54].map(s => <option key={s} value={s}>{s}</option>)}\n      </select>\n    </div>;\n  }\n});\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {cacheDrawing, setText} from 'actions';\n\nimport LeftSidebar from './LeftSidebar';\nimport RightSidebar from './RightSidebar';\nimport ImageCanvas from 'components/ImageCanvas';\n\nconst App = React.createClass({\n  updateDrawnImage(data) {\n    if (this.props.drawing === data) return;\n    this.props.onCacheDrawing(data);\n  },\n\n  render() {\n    return (\n      <div className=\"Container\">\n        <LeftSidebar />\n        <div className=\"Main\">\n          <h4 className=\"Main-subtitle\">Canvas</h4>\n          <ImageCanvas image={this.props.selected} text={this.props.text} fontSize={this.props.fontSize} contrast={this.props.contrast} size={this.props.size} onRedraw={this.updateDrawnImage} onTextChange={this.props.onTextChange} />\n        </div>\n        <RightSidebar />\n      </div>\n    );\n  }\n});\n\nconst mapStateToProps = (state) => ({\n  fontSize: state.fontSize,\n  contrast: state.contrast,\n  size: state.size,\n  selected: state.selectedImage,\n  drawing: state.drawing,\n  text: state.text\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onCacheDrawing(drawing) {\n    dispatch(cacheDrawing(drawing));\n  },\n\n  onTextChange(text) {\n    dispatch(setText(text));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {selectImage} from 'actions';\n\nimport Card from 'components/Card';\nimport ImagePicker from 'components/ImagePicker';\n\nconst LeftSidebar = ({ availableImages, selectedImage, onSelectImage }) => {\n  return <div className=\"Sidebar\">\n    <Card title=\"Images\">\n      <ImagePicker images={availableImages} selected={selectedImage} onSelect={onSelectImage} />\n    </Card>\n  </div>;\n};\n\nconst mapStateToProps = (state) => ({\n  availableImages: state.availableImages,\n  selectedImage: state.selectedImage\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onSelectImage(image) {\n    dispatch(selectImage(image));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSidebar);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {setContrast, setFontSize, setSize} from 'actions';\n\nimport Card from 'components/Card';\nimport FiltersPicker from 'components/FiltersPicker';\nimport TextPropertiesPicker from 'components/TextPropertiesPicker';\nimport SizePicker from 'components/SizePicker';\nimport DownloadButton from 'components/DownloadButton';\n\nconst RightSidebar = ({ drawing, contrast, onContrastChange, fontSize, onFontSizeChange, size, onSizeSelect }) => {\n  return <div className=\"Sidebar\">\n    <Card title=\"Sizes\">\n      <SizePicker size={size} onSizeSelect={onSizeSelect} />\n    </Card>\n    <Card title=\"Filters\">\n      <FiltersPicker contrast={contrast} onContrastChange={onContrastChange} />\n    </Card>\n    <Card title=\"Text\">\n      <TextPropertiesPicker fontSize={fontSize} onFontSizeChange={onFontSizeChange} />\n    </Card>\n    <DownloadButton drawing={drawing} />\n    <p className=\"Credit\">\n      Made by <a href=\"http://goshakkk.name\">Gosha Arinich</a>. <a href=\"https://github.com/goshakkk/pabla\">Repo</a>.\n    </p>\n  </div>;\n};\n\nconst mapStateToProps = (state) => ({\n  fontSize: state.fontSize,\n  contrast: state.contrast,\n  size: state.size,\n  drawing: state.drawing\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onFontSizeChange(size) {\n    dispatch(setFontSize(size));\n  },\n\n  onContrastChange(contrast) {\n    dispatch(setContrast(contrast));\n  },\n\n  onSizeSelect(size) {\n    dispatch(setSize(size));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RightSidebar);\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport {createStore} from 'redux';\nimport {Provider} from 'react-redux';\n\nimport reducer from 'reducer';\nimport App from 'container/App';\n\nconst store = createStore(reducer);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.querySelector('#app')\n  );\n});\n","const images = [\n  { url: 'https://images.unsplash.com/photo-1458640904116-093b74971de9?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1453227588063-bb302b62f50b?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1451906278231-17b8ff0a8880?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1447969025943-8219c41ea47a?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1421749810611-438cc492b581?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1449960238630-7e720e630019?fm=jpg' },\n  { url: 'https://images.unsplash.com/photo-1433190152045-5a94184895da?fm=jpg' }\n];\n\nconst initialState = {\n  fontSize: 32,\n  contrast: true,\n  availableImages: images,\n  selectedImage: images[0],\n  drawing: null,\n  size: 'square',\n  text: '“Others have seen what is and asked why. I have seen what could be and asked why not. ”\\n- Pablo Picasso'\n};\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case 'SET_FONT_SIZE':\n      return Object.assign({}, state, { fontSize: action.size });\n    case 'SET_CONTRAST':\n      return Object.assign({}, state, { contrast: action.contrast });\n    case 'SELECT_IMAGE':\n      return Object.assign({}, state, { selectedImage: action.image });\n    case 'SET_SIZE':\n      return Object.assign({}, state, { size: action.size });\n    case 'SET_TEXT':\n      return Object.assign({}, state, { text: action.text });\n    case 'CACHE_DRAWING':\n      return Object.assign({}, state, { drawing: action.drawing });\n    default:\n      return state;\n  }\n}\n","import {addText} from 'util/text';\n\nconst canvasComponents = {\n  image(ctx, child) {\n    drawImage(ctx, child.frame, child.image);\n  },\n  filter(ctx, child) {\n    applyContrast(ctx, child.frame);\n  },\n  text(ctx, child) {\n    const rect = addText(ctx, child.fontSize, child.frame, child.text);\n    child.onUpdateRect && child.onUpdateRect(rect);\n  },\n  rect(ctx, child) {\n    ctx.fillStyle = child.fill;\n    ctx.fillRect(...child.frame);\n  },\n  outline(ctx, child) {\n    ctx.lineWidth = child.width;\n    ctx.strokeStyle = child.color;\n    ctx.strokeRect(...child.frame);\n  },\n  line(ctx, child) {\n    ctx.strokeStyle = child.color;\n    ctx.lineWidth = child.width;\n    ctx.lineCap = 'round';\n    ctx.beginPath();\n    ctx.moveTo(...child.from);\n    ctx.lineTo(...child.to);\n    ctx.stroke();\n    ctx.strokeStyle = null;\n  }\n};\n\nconst applyContrast = (ctx, frame) => {\n  ctx.fillStyle = \"rgba(45, 45, 45, 0.45)\";\n  ctx.fillRect(...frame);\n};\n\nconst drawImage = (ctx, frame, img) => {\n  const canvasWidth = frame[2];\n  const canvasHeight = frame[3];\n\n  const imgWidth = img.naturalWidth;\n  const imgHeight = img.naturalHeight;\n\n  const origRatio = imgWidth / imgHeight;\n  const canvasRatio = canvasWidth / canvasHeight;\n\n  // determine crop\n  let zoneWidth, zoneHeight;\n  if (canvasRatio >= origRatio) {\n    zoneWidth = imgWidth;\n    zoneHeight = imgWidth / canvasRatio;\n  } else {\n    zoneWidth = imgHeight * canvasRatio;\n    zoneHeight = imgHeight;\n  }\n\n  // center\n  const xPad = (imgWidth - zoneWidth) / 2;\n  const yPad = (imgHeight - zoneHeight) / 2;\n\n  ctx.drawImage(img, xPad, yPad, zoneWidth, zoneHeight, 0, 0, canvasWidth, canvasHeight);\n};\n\nexport const renderCanvasLayout = (ctx, layout) => {\n  layout.children.forEach(child => {\n    if (!child) return;\n    const renderer = canvasComponents[child.type];\n    if (!renderer) console.error(`Unknown canvas component: ${child.type}`);\n    renderer(ctx, child);\n  });\n};\n","const CANVAS_WIDTH = 500;\nconst MAX_TEXT_WIDTH = CANVAS_WIDTH - 40 - 10;\n\nexport const splitTextInLines = (ctx, maxWidth, fontSize, text) => {\n  ctx.font = `${fontSize}px Georgia`;\n  ctx.fillStyle = \"white\";\n\n  const paras = text.split('\\n');\n  const words = paras.map(para => para.split(' ')).reduce((acc, words, idx) => {\n    const a = idx == paras.length - 1 ? [] : ['\\n'];\n    return acc.concat(words).concat(a);\n  }, []);\n  let lines = [''];\n  let indices = [[]];\n\n  let lastGlobIdx = 0;\n  words.forEach((word, idx) => {\n    if (word === '\\n') {\n      indices.push([]);\n      lines.push('');\n      return;\n    }\n    const lastIdx = lines.length-1;\n    let lastLine = lines[lastIdx]\n    const newText = lastLine.length === 0 ? word : lastLine + ' ' + word;\n    if (ctx.measureText(newText).width <= maxWidth || lastLine.length === 0) {\n      lines[lastIdx] = newText;\n      const empty = lastLine.length === 0;\n      indices[lastIdx] = indices[lastIdx].concat(word.split('').map((_, i) => lastGlobIdx + 1 + i));\n    } else {\n      indices.push(word.split('').map((_, i) => lastGlobIdx + 1 + i));\n      lines.push(word);\n    }\n    indices[lines.length-1].push(lastGlobIdx + 1 + word.length);\n    lastGlobIdx = lastGlobIdx + 1 + word.length\n  });\n\n  return [lines, indices];\n};\n\nexport const findIdxForCursor = (ctx, textRect, cursorAt, fontSize, text) => {\n  ctx.font = `${fontSize}px Georgia`;\n  ctx.fillStyle = \"white\";\n  const maxWidth = MAX_TEXT_WIDTH;\n  const [lines, mapIndices] = splitTextInLines(ctx, maxWidth, fontSize, text);\n  const spaced = fontSize * 1.3;\n  let cursor;\n  lines.forEach((line, idx) => {\n    const x = textRect[0] + 10;\n    const y = textRect[1] + fontSize + (idx * spaced);\n    // find cursor\n    if (cursorAt && cursorAt.y <= y && cursorAt.y >= y - spaced) {\n      line.split('').forEach((char, idx) => {\n        const wd0 = ctx.measureText(line.slice(0, idx)).width;\n        const wd1 = ctx.measureText(line.slice(0, idx+1)).width;\n        const curX = cursorAt.x - x;\n        if (curX >= wd0 && curX <= wd1) {\n          cursor = text.indexOf(line) + idx;\n        }\n      });\n    }\n  });\n  return cursor;\n};\n\nexport const coordsForLine = (textRect, fontSize, lineNo) => {\n  const spaced = fontSize * 1.3;\n  return { x: textRect[0] + 10, y: textRect[1] + fontSize + (lineNo * spaced) };\n};\n\nexport const findPosForCursor = (ctx, cursor, fontSize, text) => {\n  const maxWidth = MAX_TEXT_WIDTH;\n  const [lines, mapIndices] = splitTextInLines(ctx, maxWidth, fontSize, text);\n\n  const line = mapIndices.find(line => line.indexOf(cursor+1) !== -1);\n  let pos;\n  if (line) {\n    const lineNo = mapIndices.indexOf(line);\n    const idxInLine = line.indexOf(cursor+1);\n    const lineText = line.map(i => text[i-1]).join('');\n\n    pos = {lineNo, idxInLine, line};\n  }\n  return pos;\n};\n\nexport const findCoordsForPos = (ctx, textRect, fontSize, text, pos) => {\n  const {lineNo, idxInLine, line} = pos;\n  const lineText = line.map(i => text[i-1]).join('');\n\n  const {x, y} = coordsForLine(textRect, fontSize, lineNo);\n  const wd1 = ctx.measureText(lineText.slice(0, idxInLine + 1)).width;\n\n  return { x: x+wd1, y1: y-fontSize+7, y2: y+7 };\n};\n\nexport const findRectsForSelection = (ctx, textRect, cursor1, cursor2, fontSize, text) => {\n  let idx1 = cursor1;\n  let idx2 = cursor2;\n  if (idx1 > idx2) {\n    [idx1, idx2] = [idx2, idx1];\n  }\n  const pos1 = findPosForCursor(ctx, idx1, fontSize, text);\n  const pos2 = findPosForCursor(ctx, idx2, fontSize, text);\n\n  if (!(pos1 && pos2)) return;\n  const [lines, mapIndices] = splitTextInLines(ctx, MAX_TEXT_WIDTH, fontSize, text);\n\n  if (pos1.lineNo === pos2.lineNo) {\n    const line = mapIndices.find(line => line.indexOf(idx1+1) !== -1);\n    const lineText = line.map(i => text[i-1]).join('');\n    const {x, y} = coordsForLine(textRect, fontSize, pos1.lineNo);\n    const wd1 = ctx.measureText(lineText.slice(0, pos1.idxInLine + 1)).width;\n    const wd2 = ctx.measureText(lineText.slice(pos1.idxInLine + 1, pos2.idxInLine)).width;\n\n    return [{x1:x+wd1, x2:x+wd1+wd2, y1: y-fontSize+7, y2:y+7 }];\n  } else {\n    const lineNos = Array.apply(0, Array(pos2.lineNo - pos1.lineNo + 1)).map((_, idx) => idx + pos1.lineNo);\n\n    return lineNos.map(lineNo => {\n      const {x, y} = coordsForLine(textRect, fontSize, lineNo);\n\n      let wd1, wd2;\n      if (lineNo == pos1.lineNo) {\n        const line = mapIndices.find(line => line.indexOf(idx1+1) !== -1);\n        const lineText = line.map(i => text[i-1]).join('');\n        wd1 = ctx.measureText(lineText.slice(0, pos1.idxInLine +1)).width;\n        wd2 = ctx.measureText(lineText.slice(pos1.idxInLine + 1)).width;\n      } else if (lineNo === pos2.lineNo) {\n        const line = mapIndices.find(line => line.indexOf(idx2+1) !== -1);\n        const lineText = line.map(i => text[i-1]).join('');\n        wd1 = 0;\n        wd2 = ctx.measureText(lineText.slice(0, pos2.idxInLine)).width;\n      } else {\n        wd1 = 0\n        wd2 = 280;\n      }\n      return {x1:x+wd1, x2:x+wd1+wd2, y1: y-fontSize+7, y2:y+7 };\n    });\n  }\n};\n\nexport const addText = (ctx, fontSize, _textRect, text) => {\n  const textRect = _textRect.slice();\n\n  ctx.font = `${fontSize}px Georgia`;\n  ctx.fillStyle = \"white\";\n  const maxWidth = MAX_TEXT_WIDTH;\n  const [lines, mapIndices] = splitTextInLines(ctx, maxWidth, fontSize, text);\n\n  const spaced = fontSize * 1.3;\n  lines.forEach((line, idx) => {\n    const {x, y} = coordsForLine(textRect, fontSize, idx);\n    ctx.fillText(line, x, y, textRect[2]-20);\n  });\n\n  const totalHeight = lines.length * spaced;\n\n  textRect[3] = totalHeight + 10;\n\n  return textRect;\n};\n","export default class TextEditor {\n  constructor(component) {\n    this.component = component;\n    this.cursor = 0;\n    this.cursor1 = null;\n    this.cursor2 = null;\n    this.showCursor = false;\n  }\n\n  getText() {\n    return this.component.props.text;\n  }\n\n  toggleCursor() {\n    this.showCursor = !this.showCursor;\n  }\n\n  moveCursor(dir, shift) {\n    // TODO: implement shift-selection\n    shift = false;\n\n    if (shift && !this.cursor1 && !this.cursor2) {\n      this.cursor1 = this.cursor2 = this.cursor;\n    }\n\n    if (!shift) {\n      this.cursor1 = this.cursor2 = null;\n    }\n\n    if (dir === 'left') {\n      this.cursor = this.cursor - 1;\n      if (shift) {\n        this.cursor2 = this.cursor;\n      }\n    } else if (dir === 'right') {\n      this.cursor = this.cursor + 1;\n      if (shift) {\n        this.cursor2 = this.cursor;\n      }\n    } else {\n      return;\n    }\n  }\n\n  insertOrDeleteChar(char) {\n    const currText = this.getText();\n    let newText;\n    if (!this.cursor1 && !this.cursor2) {\n      const globalCurrIdx = this.cursor;\n      const beforeCurr = currText.slice(0, globalCurrIdx + 1);\n      const afterCurr = currText.slice(globalCurrIdx+1);\n      if (!char) {\n        newText = beforeCurr.slice(0, -1) + afterCurr;\n        this.cursor = globalCurrIdx - 1;\n      } else {\n        newText = beforeCurr + char + afterCurr;\n        this.cursor = globalCurrIdx + 1;\n      }\n    } else {\n      const idx1 = this.cursor1;\n      const idx2 = this.cursor2;\n\n      const beforeCurr = currText.slice(0, idx1 + 1);\n      const afterCurr = currText.slice(idx2);\n      if (!char) {\n        newText = beforeCurr + afterCurr;\n        this.cursor1 = null;\n        this.cursor2 = null;\n        this.cursor = idx1;\n      } else {\n        newText = beforeCurr + char + afterCurr;\n        this.cursor1 = null;\n        this.cursor2 = null;\n        this.cursor = idx1 + 1;\n      }\n    }\n\n    return newText;\n  }\n\n  selectAll() {\n    // doesn't quite select the first char\n    this.cursor1 = 1;\n    this.cursor2 = this.getText().length;\n    this.cursor = this.cursor2;\n  }\n}\n"]}