!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,s=function(e,t){for(var n,r=[],i=(a.test(t)?e+"/"+t:t).split("/"),s=0,o=i.length;o>s;s++)n=i[s],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(n){var r=s(o(t),n);return e.require(r,t)}},c=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,u(e),r),r.exports},l=function(e){return r[e]?l(r[e]):e},f=function(e,r){null==r&&(r="/");var a=l(e);if(i.call(n,a))return n[a].exports;if(i.call(t,a))return c(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};f.alias=function(e,t){r[t]=e},f.reset=function(){t={},n={},r={}};var d=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/,p=function(e){if(d.test(e)){var t=e.replace(d,"");i.call(r,t)&&r[t].replace(d,"")!==t+"/index"||(r[t]=e)}if(h.test(e)){var n=e.replace(h,"");i.call(r,n)||(r[n]=e)}};f.register=f.define=function(e,r){if("object"==typeof e)for(var a in e)i.call(e,a)&&f.register(a,e[a]);else t[e]=r,delete n[e],p(e)},f.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},f.brunch=!0,f._cache=n,e.require=f}}(),require.register("actions.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resetSearch=e.searchImages=e.initialFetchImages=e.setQuery=e.cacheDrawing=e.setText=e.setSize=e.selectImage=e.setFilter=e.setFontSize=void 0;var r=t("util/unsplash"),i=(e.setFontSize=function(e){return{type:"SET_FONT_SIZE",size:e}},e.setFilter=function(e){return{type:"SET_FILTER",filter:e}},e.selectImage=function(e){return{type:"SELECT_IMAGE",image:e}});e.setSize=function(e){return{type:"SET_SIZE",size:e}},e.setText=function(e){return{type:"SET_TEXT",text:e}},e.cacheDrawing=function(e){return{type:"CACHE_DRAWING",drawing:e}},e.setQuery=function(e){return{type:"SET_QUERY",query:e}},e.initialFetchImages=function(){return function(e){(0,r.getPopularImages)().then(function(t){e({type:"RECEIVE_IMAGES",images:t}),e(i(t[0]))})}},e.searchImages=function(e){return function(t){(0,r.searchImages)(e).then(function(e){t({type:"RECEIVE_IMAGES",images:e})})}},e.resetSearch=function(){return function(e){(0,r.getPopularImages)().then(function(t){e({type:"RECEIVE_IMAGES",images:t})})}}}),require.register("components/Canvas/Container.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=t("react"),s=r(a),o=t("react/lib/ReactUpdates"),u=r(o),c=t("react/lib/ReactMultiChild"),l=r(c),f=t("react/lib/ReactInstanceMap"),d=r(f),h=t("util/canvas"),p=Object.assign({},l["default"].Mixin,{mountAndInjectChildren:function(e,t,n){this.mountChildren(e,t,n);window.requestAnimationFrame(this._draw)},updateChildren:function(e,t,n){this.mountAndInjectChildren(e,t,n)}});e["default"]=s["default"].createClass({displayName:"Container",mixins:[p],render:function(){var e=this.props,t=e.width,n=e.height,r=this.props,a=r.onMouseDown,o=r.onMouseMove,u=r.onMouseUp,c={width:t,height:n},l=window.devicePixelRatio||1;return s["default"].createElement("canvas",i({ref:"canvas",width:t*l,height:n*l,style:c},{onMouseDown:a,onMouseMove:o,onMouseUp:u}))},componentDidMount:function(){this._debugID=this._reactInternalInstance._debugID;var e=u["default"].ReactReconcileTransaction.getPooled();e.perform(this.mountAndInjectChildren,this,this.props.children,e,d["default"].get(this)._context),u["default"].ReactReconcileTransaction.release(e),this.refs.canvas.getContext("2d").scale(window.devicePixelRatio||1,window.devicePixelRatio||1)},componentDidUpdate:function(e){var t=u["default"].ReactReconcileTransaction.getPooled();t.perform(this.updateChildren,this,this.props.children,t,d["default"].get(this)._context),u["default"].ReactReconcileTransaction.release(t),e.height===this.props.height&&e.width===this.props.width||this.refs.canvas.getContext("2d").scale(window.devicePixelRatio||1,window.devicePixelRatio||1)},_draw:function(){var e=this,t=Object.keys(this._renderedChildren).map(function(t){var n=e._renderedChildren[t],r=n.getNativeNode();return r}),n={frame:[0,0,this.props.width,this.props.height],children:t},r=this.refs.canvas,i=r.getContext("2d"),a=this.props,s=a.width,o=a.height;i.clearRect(0,0,s,o),(0,h.renderCanvasLayout)(i,n),this.props.onRedraw&&this.props.onRedraw(r.toDataURL("image/jpeg"))}})}),require.register("components/Canvas/createCanvasComponent.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(e,t){var n=function(e){this._el=e};return n.displayName="Rect",Object.assign(n.prototype,{construct:function(){},mountComponent:function(e,t,n,r){return{}},receiveComponent:function(){},unmountComponent:function(){},getNativeNode:function(){return t(this._el.props)},getPublicInstance:function(){return t(this._el.props)}}),n}}),require.register("components/Canvas/index.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=e.CanvasLine=e.CanvasOutline=e.CanvasText=e.CanvasImage=e.CanvasFilter=e.CanvasRect=void 0;var i=t("./Container"),a=r(i),s=t("./createCanvasComponent"),o=r(s);e.CanvasRect=(0,o["default"])("CanvasRect",function(e){return Object.assign({type:"rect"},e)}),e.CanvasFilter=(0,o["default"])("CanvasFilter",function(e){return Object.assign({type:"filter"},e)}),e.CanvasImage=(0,o["default"])("CanvasImage",function(e){return Object.assign({type:"image"},e)}),e.CanvasText=(0,o["default"])("CanvasText",function(e){return Object.assign({type:"text"},e)}),e.CanvasOutline=(0,o["default"])("CanvasOutline",function(e){return Object.assign({type:"outline"},e)}),e.CanvasLine=(0,o["default"])("CanvasLine",function(e){return Object.assign({type:"line"},e)}),e.Canvas=a["default"]}),require.register("components/Card.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=function(e){var t=e.title,n=e.children;return a["default"].createElement("div",{className:"Card"},a["default"].createElement("div",{className:"Card-header"},a["default"].createElement("h4",null,t)),n)}}),require.register("components/DownloadButton.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=a["default"].createClass({displayName:"DownloadButton",propTypes:{drawing:a["default"].PropTypes.string},handleDownload:function(e){var t=this.props.drawing,n=e.target;n.href=t,n.click()},render:function(){return a["default"].createElement("div",null,a["default"].createElement("a",{className:"Button",download:"pabla.jpg",target:"_blank",onClick:this.handleDownload},"Download"))}})}),require.register("components/FiltersPicker.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=a["default"].createClass({displayName:"FiltersPicker",propTypes:{filter:a["default"].PropTypes.oneOf(["none","light_contrast","heavy_contrast"]).isRequired,onFilterChange:a["default"].PropTypes.func.isRequired},updateFilter:function(){var e=this.refs.select.value;this.props.onFilterChange(e)},render:function(){return a["default"].createElement("div",null,a["default"].createElement("select",{className:"FiltersPicker",value:this.props.filter,ref:"select",onChange:this.updateFilter},a["default"].createElement("option",{value:"none"},"None"),a["default"].createElement("option",{value:"light_contrast"},"Light contrast"),a["default"].createElement("option",{value:"heavy_contrast"},"Heavy contrast")))}})}),require.register("components/ImageCanvas.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=t("react"),s=r(a),o=t("./Canvas"),u=t("util/imageCache"),c=t("util/text"),l=t("util/textEditor"),f=r(l),d=document.createElement("canvas").getContext("2d"),h={8:"backspace",27:"escape",37:"arr_left",39:"arr_right"},p={tall:[500,750],square:[500,500],wide:[500,250]},m=function(e,t){var n=t.getBoundingClientRect(),r={x:e.clientX-n.left,y:e.clientY-n.top};return r},g=function(e,t){return e.x>=t[0]&&e.x<=t[0]+t[2]&&e.y>=t[1]&&e.y<=t[1]+t[3]},v=function(e,t){return[e[0]-t.x,e[1]-t.y,e[2],e[3]]};e["default"]=s["default"].createClass({displayName:"ImageCanvas",initSize:function(e){var t=this,n={},r=i(p[e],2);n.canvasWidth=r[0],n.canvasHeight=r[1];var a=this.state;return a.canvasWidth===n.canvasWidth&&a.canvasHeight===n.canvasHeight?Promise.resolve():new Promise(function(e){t.setState(n,e)})},loadImage:function(e){var t=this;return e?(this.props.image!==e&&this.setState({image:null}),(0,u.getImage)(e).then(function(e){t.setState({image:e})})):Promise.resolve()},componentWillReceiveProps:function(e){var t=this;Promise.all([this.initSize(e.size),this.loadImage(e.image)]).then(function(){t.redraw(e)})},getInitialState:function(){return this.textEditor=new f["default"](this),{}},componentWillMount:function(){Promise.all([this.initSize(this.props.size),this.loadImage(this.props.image)])},componentDidMount:function(){var e=this;this.textRect=[20,20,this.state.canvasWidth-40,this.state.canvasHeight-40],window.requestAnimationFrame(this.doRedraw),setInterval(function(){e.state.isEditing&&(e.textEditor.toggleCursor(),window.requestAnimationFrame(e.doRedraw))},450)},doRedraw:function(){this.redraw(this.props)},redraw:function(e){e||(e=this.props),this.forceUpdate()},cancelEditing:function(){this.setState({isEditing:!1})},updateCursor:function(e){"escape"===h[e.which]&&(this.cancelEditing(),e.target.blur());var t=this.refs.txt,n=t.selectionStart,r=t.selectionEnd;this.textEditor.setFromInput(n,r),setTimeout(this.doRedraw,0)},setFocus:function(){this.setState({isFocused:!0})},setNoFocus:function(){this.setState({isFocused:!1,isEditing:!1})},handleMouseDown:function(e){var t=m(e,this.refs.canvas.refs.canvas);this.startPos=t;var n=this.textRect,r=g(t,n);r?(this.mouseHeld=!0,this.state.isFocused&&(this.mouseDown=new Date),this.setFocus()):this.setNoFocus()},handleMouseMove:function(e){if(this.mouseHeld){var t=this.startPos,n=m(e,this.refs.canvas.refs.canvas),r={x:t.x-n.x,y:t.y-n.y},i=this.state,a=i.isFocused,s=i.isEditing;if(a&&!s)this.textRect=v(this.textRect,r),this.mouseDiff=r,this.startPos=n;else if(a&&s){var o=t,u=n,l=this.textRect,f=this.props,h=f.text,p=f.fontSize,g=(0,c.findIdxForCursor)(d,l,o,p,h),y=(0,c.findIdxForCursor)(d,l,u,p,h);this.textEditor.setSelection(g,y,this.refs.txt)}setTimeout(this.doRedraw,0)}},handleMouseUp:function(e){if(this.mouseDown&&new Date-this.mouseDown<200){var t=this.textRect,n=this.startPos,r=this.props,i=r.text,a=r.fontSize,s=(0,c.findIdxForCursor)(d,t,n,a,i);this.textEditor.setCursor(s,this.refs.txt),this.setState({isEditing:!0}),this.refs.txt.focus()}this.mouseDiff=null,this.mouseDown=null,this.mouseHeld=!1,setTimeout(this.doRedraw,0)},getSelectionRects:function(){var e=this.textEditor,t=this.textRect,n=e.cursor1,r=e.cursor2;if(this.state.isEditing&&n>=0&&r>=0){var i=this.props,a=i.fontSize,s=i.text,o=(0,c.findRectsForSelection)(d,t,n,r,a,s);if(o)return o.map(function(e,t){var n=e.x1,r=e.x2,i=e.y1,a=e.y2;return[n,i,r-n,a-i]})}return[]},getCursorCoords:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=this.textEditor,n=this.textRect,r=t.cursor,i=t.showCursor;if(this.state.isEditing&&i&&0===e.length){var a=this.props,s=a.fontSize,o=a.text,u=(0,c.findPosForCursor)(d,r,s,o);if(u)return(0,c.findCoordsForPos)(d,n,s,o,u)}},render:function(){var e=this,t=this.state.image,n=this.state,r=n.canvasWidth,i=n.canvasHeight,a=n.isFocused,u=(n.isEditing,this.props),c=u.filter,l=u.fontSize,f=u.text,d=this.textRect,h=this.mouseHeld,p=(this.textEditor,[0,0,r,i]),m=this.getSelectionRects(),g=m.map(function(e,t){return s["default"].createElement(o.CanvasRect,{key:t,fill:"rgba(87, 205, 255, 0.5)",frame:e})}),v=this.getCursorCoords(m);return s["default"].createElement("div",{className:"ImageCanvas"},s["default"].createElement(o.Canvas,{ref:"canvas",width:r,height:i,onRedraw:this.props.onRedraw,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp},t?s["default"].createElement(o.CanvasImage,{image:t,frame:p}):null,s["default"].createElement(o.CanvasFilter,{filter:c,frame:p}),d?s["default"].createElement(o.CanvasText,{ref:"textRect",text:f,frame:d,fontSize:l,onUpdateRect:function(t){return e.textRect=t}}):null,d&&a?s["default"].createElement(o.CanvasOutline,{width:2,frame:d,color:h?"rgba(87, 205, 255, 0.5)":"#0092d1"}):null,v?s["default"].createElement(o.CanvasLine,{color:"rgba(255, 255, 255, 0.75)",width:1,from:[v.x,v.y1],to:[v.x,v.y2]}):null,g),s["default"].createElement("textarea",{ref:"txt",value:f,onChange:function(t){return e.props.onTextChange(t.target.value)},onKeyUp:this.updateCursor,style:{height:1,width:1,opacity:0}}))}})}),require.register("components/ImagePicker.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=a["default"].createClass({displayName:"ImagePicker",propTypes:{images:a["default"].PropTypes.arrayOf(a["default"].PropTypes.shape({url:a["default"].PropTypes.string})).isRequired,selected:a["default"].PropTypes.shape({url:a["default"].PropTypes.string}),onSelect:a["default"].PropTypes.func},handleSelect:function(e){this.props.onSelect&&this.props.onSelect(e)},render:function(){var e=this,t=this.props.selected||{};return a["default"].createElement("div",{className:"ImagePicker"},this.props.images.map(function(n){var r=n.url===t.url,i="ImagePicker-image"+(r?" ImagePicker-image--selected":""),s=n.url+"&w=364";return a["default"].createElement("div",{className:i,onClick:e.handleSelect.bind(e,n),key:n.url},a["default"].createElement("div",{className:"ImagePicker-image-wrapper"},a["default"].createElement("img",{src:s})))}))}})}),require.register("components/SearchBar.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=a["default"].createClass({displayName:"SearchBar",propTypes:{query:a["default"].PropTypes.string.isRequired,onSearch:a["default"].PropTypes.func.isRequired,onSearchReset:a["default"].PropTypes.func.isRequired,onQueryChange:a["default"].PropTypes.func.isRequired},search:function(e){e.preventDefault();var t=this.props.query;t&&t.length>0?this.props.onSearch(t):this.props.onSearchReset()},setQuery:function(e){e.preventDefault();var t=e.target.value;this.props.onQueryChange&&this.props.onQueryChange(t)},render:function(){return a["default"].createElement("form",{onSubmit:this.search},a["default"].createElement("input",{type:"text",className:"SearchBar",placeholder:"Search images",onChange:this.setQuery,value:this.props.query}))}})}),require.register("components/SizePicker.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i),s=function(e){var t=e.name,n=e.code,r=e.currentCode,i=e.onSelect,s=function(e){e.preventDefault(),i(n)},o="SizePicker-size SizePicker-size--"+n+(n===r?" SizePicker-size--selected":"");return a["default"].createElement("div",{className:o,onClick:s},a["default"].createElement("div",{className:"SizePicker-size-wrapper"},t))};e["default"]=a["default"].createClass({displayName:"SizePicker",render:function(){var e=this.props.size;return a["default"].createElement("div",{className:"SizePicker"},a["default"].createElement(s,{name:"Tall",code:"tall",currentCode:e,onSelect:this.props.onSizeSelect}),a["default"].createElement(s,{name:"Square",code:"square",currentCode:e,onSelect:this.props.onSizeSelect}),a["default"].createElement(s,{name:"Wide",code:"wide",currentCode:e,onSelect:this.props.onSizeSelect}))}})}),require.register("components/TextPropertiesPicker.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i);e["default"]=a["default"].createClass({displayName:"TextPropertiesPicker",propTypes:{fontSize:a["default"].PropTypes.number.isRequired,onFontSizeChange:a["default"].PropTypes.func.isRequired},updateFontSize:function(){var e=parseInt(this.refs.fontSize.value,10);this.props.onFontSizeChange(e)},render:function(){return a["default"].createElement("div",null,"Font size:",a["default"].createElement("select",{ref:"fontSize",value:this.props.fontSize,onChange:this.updateFontSize},[8,10,12,14,16,18,20,22,26,32,36,42,48,54].map(function(e){return a["default"].createElement("option",{key:e,value:e},e)})))}})}),require.register("container/App.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i),s=t("react-redux"),o=t("actions"),u=t("./LeftSidebar"),c=r(u),l=t("./RightSidebar"),f=r(l),d=t("components/ImageCanvas"),h=r(d),p=a["default"].createClass({displayName:"App",updateDrawnImage:function(e){this.props.drawing!==e&&this.props.onCacheDrawing(e)},render:function(){var e=this.props.selected&&this.props.selected.url,t=this.props,n=t.text,r=t.fontSize,i=t.filter,s=t.size;return a["default"].createElement("div",{className:"Container"},a["default"].createElement(c["default"],null),a["default"].createElement("div",{className:"Main"},a["default"].createElement("h4",{className:"Main-subtitle"},"Canvas"),a["default"].createElement(h["default"],{image:e,text:n,fontSize:r,filter:i,size:s,onRedraw:this.updateDrawnImage,onTextChange:this.props.onTextChange})),a["default"].createElement(f["default"],null))}}),m=function(e){return{fontSize:e.fontSize,filter:e.filter,size:e.size,selected:e.selectedImage,drawing:e.drawing,text:e.text}},g=function(e){return{onCacheDrawing:function(t){e((0,o.cacheDrawing)(t))},onTextChange:function(t){e((0,o.setText)(t))}}};e["default"]=(0,s.connect)(m,g)(p)}),require.register("container/LeftSidebar.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i),s=t("react-redux"),o=t("actions"),u=t("components/Card"),c=r(u),l=t("components/SearchBar"),f=r(l),d=t("components/ImagePicker"),h=r(d),p=function(e){var t=e.query,n=e.availableImages,r=e.selectedImage,i=e.onSelectImage,s=e.onSearch,o=e.onSearchReset,u=e.onQueryChange;return a["default"].createElement("div",{className:"Sidebar"},a["default"].createElement(c["default"],{title:"Images"},a["default"].createElement(f["default"],{query:t,onSearch:s,onSearchReset:o,onQueryChange:u}),a["default"].createElement(h["default"],{images:n,selected:r,onSelect:i})))},m=function(e){return{availableImages:e.availableImages,selectedImage:e.selectedImage,query:e.query}},g=function(e){return{onSelectImage:function(t){e((0,o.selectImage)(t))},onSearch:function(t){e((0,o.searchImages)(t))},onSearchReset:function(){e((0,o.resetSearch)())},onQueryChange:function(t){e((0,o.setQuery)(t))}}};e["default"]=(0,s.connect)(m,g)(p)}),require.register("container/RightSidebar.jsx",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("react"),a=r(i),s=t("react-redux"),o=t("actions"),u=t("components/Card"),c=r(u),l=t("components/FiltersPicker"),f=r(l),d=t("components/TextPropertiesPicker"),h=r(d),p=t("components/SizePicker"),m=r(p),g=t("components/DownloadButton"),v=r(g),y=function(e){var t=e.drawing,n=e.filter,r=e.onFilterChange,i=e.fontSize,s=e.onFontSizeChange,o=e.size,u=e.onSizeSelect;return a["default"].createElement("div",{className:"Sidebar"},a["default"].createElement(c["default"],{title:"Sizes"},a["default"].createElement(m["default"],{size:o,onSizeSelect:u})),a["default"].createElement(c["default"],{title:"Filters"},a["default"].createElement(f["default"],{filter:n,onFilterChange:r})),a["default"].createElement(c["default"],{title:"Text"},a["default"].createElement(h["default"],{fontSize:i,onFontSizeChange:s})),a["default"].createElement(v["default"],{drawing:t}),a["default"].createElement("p",{className:"Credit"},"Made by ",a["default"].createElement("a",{href:"http://goshakkk.name"},"Gosha Arinich"),". ",a["default"].createElement("a",{href:"https://github.com/goshakkk/pabla"},"Repo"),"."))},x=function(e){return{fontSize:e.fontSize,filter:e.filter,size:e.size,drawing:e.drawing}},C=function(e){return{onFontSizeChange:function(t){e((0,o.setFontSize)(t))},onFilterChange:function(t){e((0,o.setFilter)(t))},onSizeSelect:function(t){e((0,o.setSize)(t))}}};e["default"]=(0,s.connect)(x,C)(y)}),require.register("initialize.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=t("react-dom"),a=r(i),s=t("react"),o=r(s),u=t("redux"),c=t("redux-thunk"),l=r(c),f=t("react-redux"),d=t("reducer"),h=r(d),p=t("container/App"),m=r(p),g=t("actions");t("es6-promise").polyfill();var v=(0,u.createStore)(h["default"],(0,u.applyMiddleware)(l["default"]));v.dispatch((0,g.initialFetchImages)()),document.addEventListener("DOMContentLoaded",function(){a["default"].render(o["default"].createElement(f.Provider,{store:v},o["default"].createElement(m["default"],null)),document.querySelector("#app"))})}),require.register("reducer.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?i:arguments[0],t=arguments[1];switch(t.type){case"SET_FONT_SIZE":return Object.assign({},e,{fontSize:t.size});case"SET_FILTER":return Object.assign({},e,{filter:t.filter});case"SELECT_IMAGE":return Object.assign({},e,{selectedImage:t.image});case"SET_SIZE":return Object.assign({},e,{size:t.size});case"SET_TEXT":return Object.assign({},e,{text:t.text});case"CACHE_DRAWING":return Object.assign({},e,{drawing:t.drawing});case"RECEIVE_IMAGES":return Object.assign({},e,{availableImages:t.images});case"SET_QUERY":return Object.assign({},e,{query:t.query});default:return e}};var r=t("util/unsplash"),i=((0,r.getPopularImages)(),{fontSize:32,filter:"light_contrast",availableImages:[],selectedImage:null,query:"",drawing:null,size:"square",text:"“Others have seen what is and asked why. I have seen what could be and asked why not.”\n- Pablo Picasso"})}),require.register("util/canvas.js",function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.renderCanvasLayout=void 0;var i=t("util/text"),a={image:function(e,t){o(e,t.frame,t.image)},filter:function u(e,t){var u=t.filter;if("none"!==u){var n="light_contrast"===u?.35:.65;s(e,t.frame,n)}},text:function(e,t){var n=(0,i.addText)(e,t.fontSize,t.frame,t.text);t.onUpdateRect&&t.onUpdateRect(n)},rect:function(e,t){e.fillStyle=t.fill,e.fillRect.apply(e,r(t.frame))},outline:function(e,t){e.lineWidth=t.width,e.strokeStyle=t.color,e.strokeRect.apply(e,r(t.frame))},line:function(e,t){e.strokeStyle=t.color,e.lineWidth=t.width,e.lineCap="round",e.beginPath(),e.moveTo.apply(e,r(t.from)),e.lineTo.apply(e,r(t.to)),e.stroke(),e.strokeStyle=null}},s=function(e,t,n){e.fillStyle="rgba(45, 45, 45, "+n+")",e.fillRect.apply(e,r(t))},o=function(e,t,n){var r=t[2],i=t[3],a=n.naturalWidth,s=n.naturalHeight,o=a/s,u=r/i,c=void 0,l=void 0;u>=o?(c=a,l=a/u):(c=s*u,l=s);var f=(a-c)/2,d=(s-l)/2;e.drawImage(n,f,d,c,l,0,0,r,i)};e.renderCanvasLayout=function(e,t){t.children.forEach(function(t){if(t){var n=a[t.type];n||console.error("Unknown canvas component: "+t.type),n(e,t)}})}}),require.register("util/imageCache.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={},i=function(e){var t=new Image;return t.crossOrigin="anonymous",t.src=e,new Promise(function(e,n){t.onload=function(){return e(t)}})};e.getImage=function(e){if(e in r)return r[e];var t=i(e);return r[e]=t,t}}),require.register("util/text.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=500,a=i-40-10,s=e.splitTextInLines=function(e,t,n,r){e.font=n+"px Georgia",e.fillStyle="white";var i=r.split("\n"),a=i.map(function(e){return e.split(" ")}).reduce(function(e,t,n){var r=n==i.length-1?[]:["\n"];return e.concat(t).concat(r)},[]),s=[""],o=[[]],u=0;return a.forEach(function(n,r){if("\n"===n)return o.push([]),void s.push("");var i=s.length-1,a=s[i],c=0===a.length?n:a+" "+n;if(e.measureText(c).width<=t||0===a.length){s[i]=c;0===a.length;o[i]=o[i].concat(n.split("").map(function(e,t){return u+1+t}))}else o.push(n.split("").map(function(e,t){return u+1+t})),s.push(n);o[s.length-1].push(u+1+n.length),u=u+1+n.length}),[s,o]},o=(e.findIdxForCursor=function(e,t,n,i,o){e.font=i+"px Georgia",e.fillStyle="white";var u=a,c=s(e,u,i,o),l=r(c,2),f=l[0],d=(l[1],1.3*i),h=void 0;return f.forEach(function(r,a){var s=t[0]+10,u=t[1]+i+a*d;n&&n.y<=u&&n.y>=u-d&&r.split("").forEach(function(t,i){var a=e.measureText(r.slice(0,i)).width,u=e.measureText(r.slice(0,i+1)).width,c=n.x-s;c>=a&&u>=c&&(h=o.indexOf(r)+i)})}),void 0!==h?h+1:null},e.coordsForLine=function(e,t,n){var r=1.3*t;return{x:e[0]+10,y:e[1]+t+n*r}}),u=e.findPosForCursor=function(e,t,n,i){var o=a,u=s(e,o,n,i),c=r(u,2),l=(c[0],c[1]);if(0===t)return{lineNo:0,idxInLine:0,line:[""]};var f=l.find(function(e){return-1!==e.indexOf(t)}),d=void 0;if(f){var h=l.indexOf(f),p=f.indexOf(t);f.map(function(e){return i[e-1]}).join("");d={lineNo:h,idxInLine:p,line:f}}return d};e.findCoordsForPos=function(e,t,n,r,i){var a=i.lineNo,s=i.idxInLine,u=i.line,c=u.map(function(e){return r[e-1]}).join(""),l=o(t,n,a),f=l.x,d=l.y,h=e.measureText(c.slice(0,s+1)).width;return{x:f+h,y1:d-n+7,y2:d+7}},e.findRectsForSelection=function(e,t,n,i,c,l){var f=n,d=i;if(f>d){var h=[d,f];f=h[0],d=h[1]}var p=u(e,f,c,l),m=u(e,d,c,l);if(p&&m){var g=s(e,a,c,l),v=r(g,2),y=(v[0],v[1]);if(p.lineNo===m.lineNo){var x=y.find(function(e){return-1!==e.indexOf(f+1)}),C=x.map(function(e){return l[e-1]}).join(""),S=o(t,c,p.lineNo),w=S.x,E=S.y,_=e.measureText(C.slice(0,p.idxInLine)).width,I=e.measureText(C.slice(p.idxInLine,m.idxInLine)).width;return[{x1:w+_,x2:w+_+I,y1:E-c+7,y2:E+7}]}var b=Array.apply(0,Array(m.lineNo-p.lineNo+1)).map(function(e,t){return t+p.lineNo});return b.map(function(n){var r=o(t,c,n),i=r.x,a=r.y,s=void 0,u=void 0;if(n==p.lineNo){var h=y.find(function(e){return-1!==e.indexOf(f+1)}),g=h.map(function(e){return l[e-1]}).join("");s=e.measureText(g.slice(0,p.idxInLine)).width,u=e.measureText(g.slice(p.idxInLine)).width}else if(n===m.lineNo){var v=y.find(function(e){return-1!==e.indexOf(d)}),x=v.map(function(e){return l[e-1]}).join("");s=0,u=e.measureText(x.slice(0,m.idxInLine)).width}else{var C=y[n],S=C.map(function(e){return l[e-1]}).join("");s=0,u=e.measureText(S).width}return{x1:i+s,x2:i+s+u,y1:a-c+7,y2:a+7}})}},e.addText=function(e,t,n,i){var u=n.slice();e.font=t+"px Georgia",e.fillStyle="white";var c=a,l=s(e,c,t,i),f=r(l,2),d=f[0],h=(f[1],1.3*t);d.forEach(function(n,r){var i=o(u,t,r),a=i.x,s=i.y;e.fillText(n,a,s,u[2]-20)});var p=d.length*h;return u[3]=p+10,u}}),require.register("util/textEditor.js",function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.component=t,this.cursor=0,this.cursor1=null,this.cursor2=null,this.showCursor=!1}return i(e,[{key:"toggleCursor",value:function(){this.showCursor=!this.showCursor}},{key:"setFromInput",value:function(e,t){e===t?(this.cursor=e,this.cursor1=null,this.cursor2=null):(this.cursor=null,this.cursor1=e,this.cursor2=t+1)}},{key:"setSelection",value:function(e,t,n){this.cursor1=e,this.cursor2=t,n.setSelectionRange(e,t-1)}},{key:"setCursor",value:function(e,t){this.cursor=e||this.cursor,this.cursor1=null,this.cursor2=null,t.setSelectionRange(this.cursor,this.cursor)}}]),e}();e["default"]=a}),require.register("util/unsplash.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[{url:"https://images.unsplash.com/photo-1461016951828-c09537329b3a?fm=jpg",tags:["field","landscape","sunlight"]},{url:"https://images.unsplash.com/photo-1461295025362-7547f63dbaea?fm=jpg",tags:["crops"]},{url:"https://images.unsplash.com/photo-1465326117523-6450112b60b2?fm=jpg",tags:["forest","hill"]},{url:"https://images.unsplash.com/photo-1458640904116-093b74971de9?fm=jpg",tags:["dark","field"]},{url:"https://images.unsplash.com/photo-1447969025943-8219c41ea47a?fm=jpg",tags:["cat","kitten"]},{url:"https://images.unsplash.com/photo-1421749810611-438cc492b581?fm=jpg",tags:["water","landscape"]},{url:"https://images.unsplash.com/photo-1449960238630-7e720e630019?fm=jpg",tags:["water","seaside"]},{url:"https://images.unsplash.com/photo-1433190152045-5a94184895da?fm=jpg",tags:["water","cliff"]}];e.getPopularImages=function(){return Promise.resolve(r)},e.searchImages=function(e){var t=r.filter(function(t){return t.tags.some(function(t){return-1!==t.indexOf(e)})});return Promise.resolve(t)}});